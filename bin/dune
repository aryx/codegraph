(executables
 (names main_codegraph main_codegraph_build)
 (libraries 
    str bigarray
    ocamlgraph
    dyp

    compiler-libs ;; for lang_cmt 
    compiler-libs.common

    ; pfff deps
    commons
    pfff-h_program-lang
    pfff-graph_code

    ; now in codemap
    pfff-h_files-format
    database_code ; for graph_code_database

    codegraph ; lib/

    ; for codegraph_build, in pfff (hopefully in ~/.opam)
    pfff-lang_python
    pfff-lang_js pfff-lang_js-analyze
    pfff-lang_cpp 
    pfff-lang_c pfff-lang_c-analyze
    pfff-lang_ml
    pfff-lang_java pfff-lang_java-analyze
    pfff-lang_php pfff-lang_php-analyze pfff_lang_php_analyze2
    pfff-lang_lisp pfff-lang_lisp-analyze

    ; in codemap now
    layer_code

    ; in lang_GENERIC/
    pfff-lang_GENERIC_finding
    pfff-lang_GENERIC_parsing

    ; in semgrep now (and hopefully installed in ~/.opam via make install in semgrep)
    pfff-lang_GENERIC_base
    pfff-lang_GENERIC-naming

    ; in codegraph now!
    pfff-lang_GENERIC_linking

    ; in lang_SPECIFIC/pfff-bytecode
    pfff-lang_cmt pfff-lang_cmt-analyze

 )
 ; for ocamldebug
 (modes native byte)
)


(install
 (package codegraph)
 (section bin)
 (files (main_codegraph.exe as codegraph) 
        (main_codegraph_build.exe as codegraph_build))
)
